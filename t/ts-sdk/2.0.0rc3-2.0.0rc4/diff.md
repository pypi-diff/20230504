# Comparing `tmp/ts_sdk-2.0.0rc3-py3-none-any.whl.zip` & `tmp/ts_sdk-2.0.0rc4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,94 +1,94 @@
-Zip file size: 91058 bytes, number of entries: 92
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 __tests__/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 __tests__/unit/__init__.py
--rw-r--r--  2.0 unx     4709 b- defN 23-Apr-18 16:18 __tests__/unit/test_allowed_ids.py
--rw-r--r--  2.0 unx     1471 b- defN 23-Apr-18 16:18 __tests__/unit/test_cli_put.py
--rw-r--r--  2.0 unx     2466 b- defN 23-Apr-18 16:18 __tests__/unit/test_command.py
--rw-r--r--  2.0 unx    31533 b- defN 23-Apr-18 16:18 __tests__/unit/test_context.py
--rw-r--r--  2.0 unx     9218 b- defN 23-Apr-18 16:18 __tests__/unit/test_datalake.py
--rw-r--r--  2.0 unx     1628 b- defN 23-Apr-18 16:18 __tests__/unit/test_encoders.py
--rw-r--r--  2.0 unx     2161 b- defN 23-Apr-18 16:18 __tests__/unit/test_es_datalake.py
--rw-r--r--  2.0 unx     4307 b- defN 23-Apr-18 16:18 __tests__/unit/test_fileinfo.py
--rw-r--r--  2.0 unx      939 b- defN 23-Apr-18 16:18 __tests__/unit/test_merge.py
--rw-r--r--  2.0 unx     1200 b- defN 23-Apr-18 16:18 __tests__/unit/test_run_reuse.py
--rw-r--r--  2.0 unx     3552 b- defN 23-Apr-18 16:18 __tests__/unit/test_task.py
--rw-r--r--  2.0 unx      660 b- defN 23-Apr-18 16:18 __tests__/unit/test_taskdev.py
--rw-r--r--  2.0 unx    13747 b- defN 23-Apr-18 16:18 __tests__/unit/test_util_log.py
--rw-r--r--  2.0 unx     7328 b- defN 23-Apr-18 16:18 __tests__/unit/test_util_validation.py
--rw-r--r--  2.0 unx     1091 b- defN 23-Apr-18 16:18 __tests__/unit/test_versioned_ref.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 __tests__/unit/task/__init__.py
--rw-r--r--  2.0 unx     1149 b- defN 23-Apr-18 16:18 __tests__/unit/task/test_decorators.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 __tests__/unit/task/adapters/__init__.py
--rw-r--r--  2.0 unx     4988 b- defN 23-Apr-18 16:18 __tests__/unit/task/adapters/test_adapters.py
--rw-r--r--  2.0 unx     1329 b- defN 23-Apr-18 16:18 __tests__/unit/task/adapters/test_curry_version.py
--rw-r--r--  2.0 unx     2625 b- defN 23-Apr-18 16:18 __tests__/unit/task/adapters/test_platform_version.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 __tests__/unit/task/log_codes/__init__.py
--rw-r--r--  2.0 unx     2230 b- defN 23-Apr-18 16:18 __tests__/unit/task/log_codes/test_log_code_collection_meta.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 __tests__/unit/task/snapshots/__init__.py
--rw-r--r--  2.0 unx     2563 b- defN 23-Apr-18 16:18 __tests__/unit/task/snapshots/snap_test_util_log.py
--rw-r--r--  2.0 unx      183 b- defN 23-Apr-18 16:18 ts_sdk/__init__.py
--rw-r--r--  2.0 unx     2877 b- defN 23-Apr-18 16:18 ts_sdk/cli/__api.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 ts_sdk/cli/__init__.py
--rw-r--r--  2.0 unx     2173 b- defN 23-Apr-18 16:18 ts_sdk/cli/__init_cmd.py
--rw-r--r--  2.0 unx     1188 b- defN 23-Apr-18 16:18 ts_sdk/cli/__main__.py
--rw-r--r--  2.0 unx     7681 b- defN 23-Apr-18 16:18 ts_sdk/cli/__put_cmd.py
--rw-r--r--  2.0 unx     2442 b- defN 23-Apr-18 16:18 ts_sdk/cli/__utils.py
--rw-r--r--  2.0 unx       63 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/protocol/README.md.template
--rw-r--r--  2.0 unx      712 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/protocol/protocol.json.template
--rw-r--r--  2.0 unx      874 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/protocol/script.js.template
--rw-r--r--  2.0 unx      246 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/Pipfile
--rw-r--r--  2.0 unx       72 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/README.md.template
--rw-r--r--  2.0 unx      113 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/config.json
--rw-r--r--  2.0 unx     1490 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/main.py
--rw-r--r--  2.0 unx      442 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/__test__/test_business_logic.py
--rw-r--r--  2.0 unx      745 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/__test__/test_config.py
--rw-r--r--  2.0 unx      681 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/__test__/test_integration.py
--rw-r--r--  2.0 unx       35 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/__test__/data/expected.json
--rw-r--r--  2.0 unx       15 b- defN 23-Apr-18 16:18 ts_sdk/cli/protocol-template/task-script/__test__/data/input.json
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 ts_sdk/cli/put_cmd_helpers/__init__.py
--rw-r--r--  2.0 unx     1740 b- defN 23-Apr-18 16:18 ts_sdk/cli/put_cmd_helpers/upload_validator.py
--rw-r--r--  2.0 unx      270 b- defN 23-Apr-18 16:18 ts_sdk/schemas/__init__.py
--rw-r--r--  2.0 unx     1766 b- defN 23-Apr-18 16:18 ts_sdk/schemas/config.schema.json
--rw-r--r--  2.0 unx     2206 b- defN 23-Apr-18 16:18 ts_sdk/schemas/protocol.schema.json
--rw-r--r--  2.0 unx      104 b- defN 23-Apr-18 16:18 ts_sdk/task/__init__.py
--rw-r--r--  2.0 unx    25471 b- defN 23-Apr-18 16:18 ts_sdk/task/__task_script_runner.py
--rw-r--r--  2.0 unx     3317 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_command.py
--rw-r--r--  2.0 unx     6782 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_config.py
--rw-r--r--  2.0 unx    26374 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_datalake.py
--rw-r--r--  2.0 unx     1252 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_decorators.py
--rw-r--r--  2.0 unx     1714 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_es_datalake.py
--rw-r--r--  2.0 unx     5630 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_fileinfo.py
--rw-r--r--  2.0 unx     2221 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_ids.py
--rw-r--r--  2.0 unx     8334 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_log.py
--rw-r--r--  2.0 unx      917 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_merge.py
--rw-r--r--  2.0 unx     1483 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_metadata.py
--rw-r--r--  2.0 unx      827 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_storage.py
--rw-r--r--  2.0 unx     5534 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_validation.py
--rw-r--r--  2.0 unx     1391 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_versioned_ref.py
--rw-r--r--  2.0 unx      677 b- defN 23-Apr-18 16:18 ts_sdk/task/__validate_config.py
--rw-r--r--  2.0 unx     1925 b- defN 23-Apr-18 16:18 ts_sdk/task/data_model.py
--rw-r--r--  2.0 unx      669 b- defN 23-Apr-18 16:18 ts_sdk/task/encoders.py
--rw-r--r--  2.0 unx     1742 b- defN 23-Apr-18 16:18 ts_sdk/task/run.py
--rw-r--r--  2.0 unx     5183 b- defN 23-Apr-18 16:18 ts_sdk/task/run_reuse_loop.py
--rw-r--r--  2.0 unx      295 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_adapters/__init__.py
--rw-r--r--  2.0 unx     2175 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_adapters/communication_format.py
--rw-r--r--  2.0 unx      656 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_adapters/curry_format.py
--rw-r--r--  2.0 unx     1193 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_adapters/endpoint_adapter.py
--rw-r--r--  2.0 unx     2892 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_adapters/make_adapter.py
--rw-r--r--  2.0 unx     4657 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_task/__init__.py
--rw-r--r--  2.0 unx      108 b- defN 23-Apr-18 16:18 ts_sdk/task/__util_task/exceptions.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-18 16:18 ts_sdk/task/log_codes/__init__.py
--rw-r--r--  2.0 unx      178 b- defN 23-Apr-18 16:18 ts_sdk/task/log_codes/log_code.py
--rw-r--r--  2.0 unx     1831 b- defN 23-Apr-18 16:18 ts_sdk/task/log_codes/log_code_collection.py
--rw-r--r--  2.0 unx     4348 b- defN 23-Apr-18 16:18 ts_sdk/task/log_codes/log_code_collection_meta.py
--rw-r--r--  2.0 unx     1967 b- defN 23-Apr-18 16:18 ts_sdk/task/log_codes/log_code_validator.py
--rw-r--r--  2.0 unx      106 b- defN 23-Apr-18 16:18 ts_sdk/taskdev/__init__.py
--rw-r--r--  2.0 unx     5255 b- defN 23-Apr-18 16:18 ts_sdk/taskdev/context.py
--rw-r--r--  2.0 unx     1502 b- defN 23-Apr-18 16:18 ts_sdk/taskdev/testing.py
--rw-r--r--  2.0 unx    11370 b- defN 23-Apr-18 16:18 ts_sdk-2.0.0rc3.dist-info/LICENSE.txt
--rw-r--r--  2.0 unx     8636 b- defN 23-Apr-18 16:18 ts_sdk-2.0.0rc3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-18 16:18 ts_sdk-2.0.0rc3.dist-info/WHEEL
--rw-r--r--  2.0 unx       52 b- defN 23-Apr-18 16:18 ts_sdk-2.0.0rc3.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       17 b- defN 23-Apr-18 16:18 ts_sdk-2.0.0rc3.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     8507 b- defN 23-Apr-18 16:18 ts_sdk-2.0.0rc3.dist-info/RECORD
-92 files, 286292 bytes uncompressed, 77296 bytes compressed:  73.0%
+Zip file size: 91469 bytes, number of entries: 92
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 __tests__/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 __tests__/unit/__init__.py
+-rw-r--r--  2.0 unx     4709 b- defN 23-Apr-19 12:50 __tests__/unit/test_allowed_ids.py
+-rw-r--r--  2.0 unx     1471 b- defN 23-Apr-19 12:50 __tests__/unit/test_cli_put.py
+-rw-r--r--  2.0 unx     2466 b- defN 23-Apr-19 12:50 __tests__/unit/test_command.py
+-rw-r--r--  2.0 unx    31533 b- defN 23-Apr-19 12:50 __tests__/unit/test_context.py
+-rw-r--r--  2.0 unx     9218 b- defN 23-Apr-19 12:50 __tests__/unit/test_datalake.py
+-rw-r--r--  2.0 unx     1628 b- defN 23-Apr-19 12:50 __tests__/unit/test_encoders.py
+-rw-r--r--  2.0 unx     2161 b- defN 23-Apr-19 12:50 __tests__/unit/test_es_datalake.py
+-rw-r--r--  2.0 unx     4307 b- defN 23-Apr-19 12:50 __tests__/unit/test_fileinfo.py
+-rw-r--r--  2.0 unx      939 b- defN 23-Apr-19 12:50 __tests__/unit/test_merge.py
+-rw-r--r--  2.0 unx     1200 b- defN 23-Apr-19 12:50 __tests__/unit/test_run_reuse.py
+-rw-r--r--  2.0 unx     3552 b- defN 23-Apr-19 12:50 __tests__/unit/test_task.py
+-rw-r--r--  2.0 unx      660 b- defN 23-Apr-19 12:50 __tests__/unit/test_taskdev.py
+-rw-r--r--  2.0 unx    13747 b- defN 23-Apr-19 12:50 __tests__/unit/test_util_log.py
+-rw-r--r--  2.0 unx     7328 b- defN 23-Apr-19 12:50 __tests__/unit/test_util_validation.py
+-rw-r--r--  2.0 unx     1091 b- defN 23-Apr-19 12:50 __tests__/unit/test_versioned_ref.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 __tests__/unit/task/__init__.py
+-rw-r--r--  2.0 unx     1149 b- defN 23-Apr-19 12:50 __tests__/unit/task/test_decorators.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 __tests__/unit/task/adapters/__init__.py
+-rw-r--r--  2.0 unx     4988 b- defN 23-Apr-19 12:50 __tests__/unit/task/adapters/test_adapters.py
+-rw-r--r--  2.0 unx     1329 b- defN 23-Apr-19 12:50 __tests__/unit/task/adapters/test_curry_version.py
+-rw-r--r--  2.0 unx     2625 b- defN 23-Apr-19 12:50 __tests__/unit/task/adapters/test_platform_version.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 __tests__/unit/task/log_codes/__init__.py
+-rw-r--r--  2.0 unx     2230 b- defN 23-Apr-19 12:50 __tests__/unit/task/log_codes/test_log_code_collection_meta.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 __tests__/unit/task/snapshots/__init__.py
+-rw-r--r--  2.0 unx     2563 b- defN 23-Apr-19 12:50 __tests__/unit/task/snapshots/snap_test_util_log.py
+-rw-r--r--  2.0 unx      183 b- defN 23-Apr-19 12:50 ts_sdk/__init__.py
+-rw-r--r--  2.0 unx     2877 b- defN 23-Apr-19 12:50 ts_sdk/cli/__api.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 ts_sdk/cli/__init__.py
+-rw-r--r--  2.0 unx     2173 b- defN 23-Apr-19 12:50 ts_sdk/cli/__init_cmd.py
+-rw-r--r--  2.0 unx     1188 b- defN 23-Apr-19 12:50 ts_sdk/cli/__main__.py
+-rw-r--r--  2.0 unx     7681 b- defN 23-Apr-19 12:50 ts_sdk/cli/__put_cmd.py
+-rw-r--r--  2.0 unx     2442 b- defN 23-Apr-19 12:50 ts_sdk/cli/__utils.py
+-rw-r--r--  2.0 unx       63 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/protocol/README.md.template
+-rw-r--r--  2.0 unx      712 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/protocol/protocol.json.template
+-rw-r--r--  2.0 unx      874 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/protocol/script.js.template
+-rw-r--r--  2.0 unx      246 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/Pipfile
+-rw-r--r--  2.0 unx       72 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/README.md.template
+-rw-r--r--  2.0 unx      113 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/config.json
+-rw-r--r--  2.0 unx     1490 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/main.py
+-rw-r--r--  2.0 unx      442 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/__test__/test_business_logic.py
+-rw-r--r--  2.0 unx      745 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/__test__/test_config.py
+-rw-r--r--  2.0 unx      681 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/__test__/test_integration.py
+-rw-r--r--  2.0 unx       35 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/__test__/data/expected.json
+-rw-r--r--  2.0 unx       15 b- defN 23-Apr-19 12:50 ts_sdk/cli/protocol-template/task-script/__test__/data/input.json
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 ts_sdk/cli/put_cmd_helpers/__init__.py
+-rw-r--r--  2.0 unx     1740 b- defN 23-Apr-19 12:50 ts_sdk/cli/put_cmd_helpers/upload_validator.py
+-rw-r--r--  2.0 unx      270 b- defN 23-Apr-19 12:50 ts_sdk/schemas/__init__.py
+-rw-r--r--  2.0 unx     1766 b- defN 23-Apr-19 12:50 ts_sdk/schemas/config.schema.json
+-rw-r--r--  2.0 unx     2206 b- defN 23-Apr-19 12:50 ts_sdk/schemas/protocol.schema.json
+-rw-r--r--  2.0 unx      104 b- defN 23-Apr-19 12:50 ts_sdk/task/__init__.py
+-rw-r--r--  2.0 unx    25471 b- defN 23-Apr-19 12:50 ts_sdk/task/__task_script_runner.py
+-rw-r--r--  2.0 unx     3317 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_command.py
+-rw-r--r--  2.0 unx     6782 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_config.py
+-rw-r--r--  2.0 unx    28789 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_datalake.py
+-rw-r--r--  2.0 unx     1252 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_decorators.py
+-rw-r--r--  2.0 unx     1714 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_es_datalake.py
+-rw-r--r--  2.0 unx     5630 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_fileinfo.py
+-rw-r--r--  2.0 unx     2221 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_ids.py
+-rw-r--r--  2.0 unx     8334 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_log.py
+-rw-r--r--  2.0 unx      917 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_merge.py
+-rw-r--r--  2.0 unx     1483 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_metadata.py
+-rw-r--r--  2.0 unx      827 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_storage.py
+-rw-r--r--  2.0 unx     5534 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_validation.py
+-rw-r--r--  2.0 unx     1391 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_versioned_ref.py
+-rw-r--r--  2.0 unx      677 b- defN 23-Apr-19 12:50 ts_sdk/task/__validate_config.py
+-rw-r--r--  2.0 unx     1925 b- defN 23-Apr-19 12:50 ts_sdk/task/data_model.py
+-rw-r--r--  2.0 unx      669 b- defN 23-Apr-19 12:50 ts_sdk/task/encoders.py
+-rw-r--r--  2.0 unx     1742 b- defN 23-Apr-19 12:50 ts_sdk/task/run.py
+-rw-r--r--  2.0 unx     5183 b- defN 23-Apr-19 12:50 ts_sdk/task/run_reuse_loop.py
+-rw-r--r--  2.0 unx      295 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_adapters/__init__.py
+-rw-r--r--  2.0 unx     2175 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_adapters/communication_format.py
+-rw-r--r--  2.0 unx      656 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_adapters/curry_format.py
+-rw-r--r--  2.0 unx     1193 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_adapters/endpoint_adapter.py
+-rw-r--r--  2.0 unx     2892 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_adapters/make_adapter.py
+-rw-r--r--  2.0 unx     4657 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_task/__init__.py
+-rw-r--r--  2.0 unx      108 b- defN 23-Apr-19 12:50 ts_sdk/task/__util_task/exceptions.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-19 12:50 ts_sdk/task/log_codes/__init__.py
+-rw-r--r--  2.0 unx      178 b- defN 23-Apr-19 12:50 ts_sdk/task/log_codes/log_code.py
+-rw-r--r--  2.0 unx     1831 b- defN 23-Apr-19 12:50 ts_sdk/task/log_codes/log_code_collection.py
+-rw-r--r--  2.0 unx     4348 b- defN 23-Apr-19 12:50 ts_sdk/task/log_codes/log_code_collection_meta.py
+-rw-r--r--  2.0 unx     1967 b- defN 23-Apr-19 12:50 ts_sdk/task/log_codes/log_code_validator.py
+-rw-r--r--  2.0 unx      106 b- defN 23-Apr-19 12:50 ts_sdk/taskdev/__init__.py
+-rw-r--r--  2.0 unx     5255 b- defN 23-Apr-19 12:50 ts_sdk/taskdev/context.py
+-rw-r--r--  2.0 unx     1502 b- defN 23-Apr-19 12:50 ts_sdk/taskdev/testing.py
+-rw-r--r--  2.0 unx    11370 b- defN 23-Apr-19 12:50 ts_sdk-2.0.0rc4.dist-info/LICENSE.txt
+-rw-r--r--  2.0 unx     8636 b- defN 23-Apr-19 12:50 ts_sdk-2.0.0rc4.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-19 12:50 ts_sdk-2.0.0rc4.dist-info/WHEEL
+-rw-r--r--  2.0 unx       52 b- defN 23-Apr-19 12:50 ts_sdk-2.0.0rc4.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       17 b- defN 23-Apr-19 12:50 ts_sdk-2.0.0rc4.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     8507 b- defN 23-Apr-19 12:50 ts_sdk-2.0.0rc4.dist-info/RECORD
+92 files, 288707 bytes uncompressed, 77707 bytes compressed:  73.1%
```

## zipnote {}

```diff
@@ -252,26 +252,26 @@
 
 Filename: ts_sdk/taskdev/context.py
 Comment: 
 
 Filename: ts_sdk/taskdev/testing.py
 Comment: 
 
-Filename: ts_sdk-2.0.0rc3.dist-info/LICENSE.txt
+Filename: ts_sdk-2.0.0rc4.dist-info/LICENSE.txt
 Comment: 
 
-Filename: ts_sdk-2.0.0rc3.dist-info/METADATA
+Filename: ts_sdk-2.0.0rc4.dist-info/METADATA
 Comment: 
 
-Filename: ts_sdk-2.0.0rc3.dist-info/WHEEL
+Filename: ts_sdk-2.0.0rc4.dist-info/WHEEL
 Comment: 
 
-Filename: ts_sdk-2.0.0rc3.dist-info/entry_points.txt
+Filename: ts_sdk-2.0.0rc4.dist-info/entry_points.txt
 Comment: 
 
-Filename: ts_sdk-2.0.0rc3.dist-info/top_level.txt
+Filename: ts_sdk-2.0.0rc4.dist-info/top_level.txt
 Comment: 
 
-Filename: ts_sdk-2.0.0rc3.dist-info/RECORD
+Filename: ts_sdk-2.0.0rc4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ts_sdk/task/__util_datalake.py

```diff
@@ -1,39 +1,36 @@
 """Datalake functions"""
 import gzip
 import io
 import os
 import re
 import shutil
-import sys
 import tempfile
 from pathlib import Path
 from typing import Collection, Dict, Optional, Tuple, Union
 from urllib.parse import urlencode
 from uuid import uuid4
 
 import boto3
-from boto3.s3.transfer import TransferConfig
 import query_string
 import simplejson as json
 import smart_open
 from botocore.client import Config
 
 from .__util_metadata import FIELDS
 from .__util_versioned_ref import VersionedRef
 from .encoders import DataclassEncoder
 from .data_model import AnyLabel, IdsUtilDict
 
 WRITE_ALLOWED_CATEGORIES = ["IDS", "PROCESSED", "TMP"]
 DISABLE_GZIP = os.environ.get("DISABLE_GZIP")
 ENV = os.environ.get("ENV")
 AWS_REGION = os.environ.get("AWS_REGION")
-MULTIPART_CHUNK_SIZE = 10 * 2**20
-MULTIPART_THRESHOLD = (
-    100 * 2**20
+MULTIPART_SIZE = (
+    100 * 1024 * 1024
 )  # don't use multipart if file size is smaller than 100MB
 LARGE_FILE_SIZE_THRESHOLD_BYTES = (
     5 * 2**30
 )  # We have to handle files that are > 5 GB differently
 
 
 def lowerMetadataKeys(metadata: dict) -> dict:
@@ -79,64 +76,87 @@
         if pipeline_id in existing_pipeline_history:
             new_pipeline_history = existing_pipeline_history
         else:
             new_pipeline_history = existing_pipeline_history + "," + pipeline_id
     return new_pipeline_history
 
 
-class MissingValidatorException(Exception):
-    """An IDS cannot be validated because validator could not be found"""
-
-
-class InvalidFileCategoryError(Exception):
-    """The 'file category' is not valid. See :const:`~WRITE_ALLOWED_CATEGORIES`."""
-
+class S3FileobjUploader:
+    """AWS S3 File object uploader"""
 
-class GzipPipe(io.BytesIO):
-    CHUNK_SIZE = 1024 * 1024
-
-    def __init__(self, source: io.BytesIO, compresslevel: int = 5):
-        super().__init__()
+    def __init__(
+        self, s3, fileobj, params, options={"disable_gzip": False, "compresslevel": 5}
+    ):
+        self.s3 = s3
+        self.fileobj = fileobj
+        self.params = params
+        self.disable_gzip = options.get("disable_gzip", False)
+        self.compresslevel = options.get("compresslevel", 5)
+        self.stream = io.BytesIO()
+        self.part_count = 0
+        self.multipart = None
+        self.parts = []
+        if not self.disable_gzip:
+            self.compressor = gzip.GzipFile(
+                fileobj=self.stream, mode="wb", compresslevel=self.compresslevel
+            )
 
-        source.seek(0)
-        self.source = source
-        self.source_eof = False
-        self.buffer = bytearray()
-        self.zipfile = gzip.GzipFile(
-            fileobj=self, mode="wb", compresslevel=compresslevel
+    def _upload_part(self):
+        print(f"upload multipart {self.part_count}")
+        if self.part_count == 0:
+            self.multipart = self.s3.create_multipart_upload(**self.params)
+        self.part_count += 1
+        self.stream.seek(0)
+        part = self.s3.upload_part(
+            Body=self.stream,
+            Bucket=self.multipart["Bucket"],
+            Key=self.multipart["Key"],
+            PartNumber=self.part_count,
+            UploadId=self.multipart["UploadId"],
+        )
+        self.parts.append({**part, "PartNumber": self.part_count})
+        self.stream.seek(0)
+        self.stream.truncate()
+
+    def _upload_last_part(self):
+        if self.part_count == 0:
+            self.stream.seek(0)
+            return self.s3.put_object(Body=self.stream, **self.params)
+        self._upload_part()
+        parts = []
+        for part in self.parts:
+            parts.append({"ETag": part["ETag"], "PartNumber": part["PartNumber"]})
+        return self.s3.complete_multipart_upload(
+            Bucket=self.multipart["Bucket"],
+            Key=self.multipart["Key"],
+            UploadId=self.multipart["UploadId"],
+            MultipartUpload={"Parts": parts},
         )
 
-    def seekable(self) -> bool:
-        return False
+    def upload(self):
+        while True:
+            chunk = self.fileobj.read(1024 * 1024)
+            if not chunk:
+                if not self.disable_gzip:
+                    self.compressor.close()
+                return self._upload_last_part()
+            if self.disable_gzip:
+                self.stream.write(chunk)
+            else:
+                self.compressor.write(chunk)
+            if self.stream.tell() >= MULTIPART_SIZE:
+                self._upload_part()
 
-    def write(self, data):
-        self.buffer += data
 
-    def read(self, size=-1):
-        while ((len(self.buffer) < size) or (size == -1)) and not self.source_eof:
-            if self.source is None:
-                break
-            chunk = self.source.read(self.CHUNK_SIZE)
-            self.zipfile.write(chunk)
-            if len(chunk) < self.CHUNK_SIZE:
-                self.source_eof = True
-                self.zipfile.flush()
-                self.zipfile.close()
-                break
-
-        if size == 0:
-            result = b""
-        elif size >= 1:
-            result = bytes(self.buffer[0:size])
-            del self.buffer[0:size]
-        else:
-            result = bytes(self.buffer)
-            self.buffer = bytearray()
+class MissingValidatorException(Exception):
+    """An IDS cannot be validated because validator could not be found"""
 
-        return result
+
+class InvalidFileCategoryError(Exception):
+    """The 'file category' is not valid. See :const:`~WRITE_ALLOWED_CATEGORIES`."""
 
 
 class Datalake:
     """S3 Datalake class"""
 
     def __init__(self, endpoint, ids_util: Optional[IdsUtilDict] = None):
         self._ids_util = ids_util
@@ -356,64 +376,83 @@
                     "fileKey": file_key,
                     "fileId": file_id,
                 },
                 labels=labels,
                 sse_kms_key_id=f"alias/customer-key-{ENV}-{org_slug}",
             )
 
-        file_like_obj = None
         if hasattr(content, "read"):
-            file_like_obj = content
+            # BytesIO object has .read() attribute
+            response = S3FileobjUploader(
+                self.s3,
+                content,
+                params,
+                {"disable_gzip": DISABLE_GZIP, "compresslevel": gzip_compress_level},
+            ).upload()
+            # fakeS3 does not return VersionId, so use '' to avoid an exception
+            version_id = response.get("VersionId", "")
+            print({"level": "debug", "message": "file created", "response": response})
         else:
             # Otherwise `content` is either str, bytes or dict
             if isinstance(content, dict):
                 if file_category == "IDS":
                     if self._ids_util is not None and "validate_ids" in self._ids_util:
                         self._ids_util["validate_ids"](
                             content, ids_obj.namespace, ids_obj.name, ids_obj.version
                         )
                     else:
                         raise MissingValidatorException
                     content = json.dumps(content, ignore_nan=True)
                 else:
                     raise Exception("Writing non-IDS dicts to S3 is not supported")
 
-            if isinstance(content, str):
-                file_like_obj = io.BytesIO(content.encode())
-            else:
-                # content was already bytes, so we should not try to encode it again
-                file_like_obj = io.BytesIO(content)
-
-        try:
-            extra_args = self.extract_extra_args_from_params(params)
-
             if not DISABLE_GZIP:
-                file_like_obj = GzipPipe(
-                    file_like_obj, compresslevel=gzip_compress_level
+                if isinstance(content, str):
+                    content = content.encode()
+                content = gzip.compress(content, compresslevel=gzip_compress_level)
+
+            if len(content) >= LARGE_FILE_SIZE_THRESHOLD_BYTES:
+                print({"level": "debug", "message": "writing a 5+ GB file to s3"})
+
+                # the upload_fileobj method requires a file like object that implements read. This
+                # means we have to wrap content into an in memory stream. We will use BytesIO
+                # instead of StringIO since the metadata has to be encoded. This means that if
+                # content is a string, we have to convert it to bytes first.
+                file_like_obj = None
+                if isinstance(content, str):
+                    file_like_obj = io.BytesIO(content.encode("utf-8"))
+                else:
+                    # content was already bytes so we should not try to encode it again
+                    file_like_obj = io.BytesIO(content)
+                try:
+                    extra_args = self.extract_extra_args_from_params(params)
+
+                    self.s3.upload_fileobj(
+                        Fileobj=file_like_obj,
+                        Bucket=bucket,
+                        Key=file_key,
+                        ExtraArgs=extra_args,
+                    )
+                    version_id = self.get_latest_obj_version(bucket, file_key)
+                    print({"level": "debug", "message": "file created"})
+
+                except Exception as exc:
+                    raise Exception(
+                        f"encountered an error updating the metadata because of {exc}"
+                    ) from exc
+                finally:
+                    file_like_obj.close()
+            else:
+                response = self.s3.put_object(Body=content, **params)
+                # fakeS3 does not return VersionId, so use '' to avoid an exception
+                version_id = response.get("VersionId", "")
+                print(
+                    {"level": "debug", "message": "file created", "response": response}
                 )
 
-            self.s3.upload_fileobj(
-                Fileobj=file_like_obj,
-                Bucket=bucket,
-                Key=file_key,
-                ExtraArgs=extra_args,
-                Config=TransferConfig(
-                    multipart_threshold=MULTIPART_THRESHOLD,
-                    multipart_chunksize=MULTIPART_CHUNK_SIZE,
-                ),
-            )
-            version_id = self.get_latest_obj_version(bucket, file_key)
-            print({"level": "debug", "message": "file created"})
-
-        except Exception as exc:
-            raise Exception(f"error during s3.upload_fileobj: {exc}") from exc
-        finally:
-            if not "pytest" in sys.modules:
-                file_like_obj.close()
-
         result_file = {
             "type": "s3file",
             "bucket": bucket,
             "fileKey": file_key,
             "fileId": file_id,
             "version": version_id,
         }
```

## Comparing `ts_sdk-2.0.0rc3.dist-info/LICENSE.txt` & `ts_sdk-2.0.0rc4.dist-info/LICENSE.txt`

 * *Files identical despite different names*

## Comparing `ts_sdk-2.0.0rc3.dist-info/METADATA` & `ts_sdk-2.0.0rc4.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ts-sdk
-Version: 2.0.0rc3
+Version: 2.0.0rc4
 Summary: Tetrascience Python SDK
 Home-page: https://developers.tetrascience.com
 Author: tetrascience
 Author-email: developers@tetrascience.com
 License: Apache License 2.0
 Requires-Python: >=3.7
 Description-Content-Type: text/markdown
```

## Comparing `ts_sdk-2.0.0rc3.dist-info/RECORD` & `ts_sdk-2.0.0rc4.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -49,15 +49,15 @@
 ts_sdk/schemas/__init__.py,sha256=XhOqGgIa1_QACmJ4KfzZ6BpSI3CvUHvXnXOntBQSnXk,270
 ts_sdk/schemas/config.schema.json,sha256=lstvMB4_72lQy44AnPcBjnBaj_kfgL71chAg6AdUaKs,1766
 ts_sdk/schemas/protocol.schema.json,sha256=oekvLAMDHjQ0FUzPbkdTrATKgHc7cRbirQ9e6GBnwg8,2206
 ts_sdk/task/__init__.py,sha256=KclRzrz_C6reEoQEUIX8Xx0RcYLVDTwtfmfhXyd_1dk,104
 ts_sdk/task/__task_script_runner.py,sha256=Phr66VCsr5Ddqhgb1_Xxh9bCAb--PaWX81we5quZcZs,25471
 ts_sdk/task/__util_command.py,sha256=jcWz-ZwVb8fRyZjhyw0RoigdcJPiYp3kiGqcPQ1YSNE,3317
 ts_sdk/task/__util_config.py,sha256=E5LqtMROce80LrRGe1oOzL1n1SVaa1XMPEZCoB52eNI,6782
-ts_sdk/task/__util_datalake.py,sha256=yxuBx2-BCoKgB39rxD32FG2siRW05ZDNSysMG5nsDQE,26374
+ts_sdk/task/__util_datalake.py,sha256=zFsP6mQCxDlDiPsrXoelwTrcgTREyW76tm7Qr9zB8_w,28789
 ts_sdk/task/__util_decorators.py,sha256=SbXRst050JS24yRJcXv6V2z5E_fwgKRJEIIQtZKEEjQ,1252
 ts_sdk/task/__util_es_datalake.py,sha256=DXVxpPDQ4p7eD9c_Jpo2X_mMS5qE6KIA1yqIyeaARWo,1714
 ts_sdk/task/__util_fileinfo.py,sha256=fqmen0ZNGZHsPWPOcmpMumAOCm-WNnm_cZ2q0vfZQik,5630
 ts_sdk/task/__util_ids.py,sha256=1Cj0qOvu08BPrUKdhgExsX6nO-Azh1GzojpP3BHOprE,2221
 ts_sdk/task/__util_log.py,sha256=nG-Hz24vst5LPpfGS51C1CHMQepEpk7RmHQ5hpdHkzA,8334
 ts_sdk/task/__util_merge.py,sha256=jcs37uGHWsYrQ_Y3qhw03N1TDXZJGdZBRswtMePyOg4,917
 ts_sdk/task/__util_metadata.py,sha256=UKcPt5TzTiIJHaprDIsnRwZ5mxHuws3mHHYQ6Hb0_X0,1483
@@ -80,13 +80,13 @@
 ts_sdk/task/log_codes/log_code.py,sha256=w_XOMUKLAVGvJuo64_rp3sVFvqodqoyR0X1jblm2EOM,178
 ts_sdk/task/log_codes/log_code_collection.py,sha256=C6zxV4dfDXrslSRa0sXjSjRTUQcIHw_V-l5eFNXfJZU,1831
 ts_sdk/task/log_codes/log_code_collection_meta.py,sha256=25Gtn2hj9T1Nz6Gho2I5F25sF5LgR2wTneq25E625nY,4348
 ts_sdk/task/log_codes/log_code_validator.py,sha256=DybVQKuRjZXPG_vO5ELRmgVVwfzk98jPolklv-ukY-8,1967
 ts_sdk/taskdev/__init__.py,sha256=6ebaD6iBs5TX9NQ_4-GaEKY36wtfO0OseUwtlysUrUE,106
 ts_sdk/taskdev/context.py,sha256=iGF8eAcIaamCQ2QOKj8ANQ8qH4wiVtktqc7fHSbjRCQ,5255
 ts_sdk/taskdev/testing.py,sha256=U_uRW-5ie8zQNmgeHNSIvtem-Nj_fqdSit7TccpowMI,1502
-ts_sdk-2.0.0rc3.dist-info/LICENSE.txt,sha256=FC8uIvMLb-xkNvwGshtXfs5RofD-2-wnhE-dmpU12I8,11370
-ts_sdk-2.0.0rc3.dist-info/METADATA,sha256=OEidnJbTQ5aDTVsCo8yIMfDoUQC7DlsIZ2Y9vS3ytAs,8636
-ts_sdk-2.0.0rc3.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-ts_sdk-2.0.0rc3.dist-info/entry_points.txt,sha256=d-rCROmr7Jbp7WkB62VQhU2X1ygWcL4kuwWOdciRvH8,52
-ts_sdk-2.0.0rc3.dist-info/top_level.txt,sha256=ACdEe6bsMwpkGW5IM2T4f-kj-_RL-k2YG1Rn2TJfhkU,17
-ts_sdk-2.0.0rc3.dist-info/RECORD,,
+ts_sdk-2.0.0rc4.dist-info/LICENSE.txt,sha256=FC8uIvMLb-xkNvwGshtXfs5RofD-2-wnhE-dmpU12I8,11370
+ts_sdk-2.0.0rc4.dist-info/METADATA,sha256=OZsSkQK3nMwPGYyfbMuQWJ1KnGzZeO4UWjI0ddttzYA,8636
+ts_sdk-2.0.0rc4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+ts_sdk-2.0.0rc4.dist-info/entry_points.txt,sha256=d-rCROmr7Jbp7WkB62VQhU2X1ygWcL4kuwWOdciRvH8,52
+ts_sdk-2.0.0rc4.dist-info/top_level.txt,sha256=ACdEe6bsMwpkGW5IM2T4f-kj-_RL-k2YG1Rn2TJfhkU,17
+ts_sdk-2.0.0rc4.dist-info/RECORD,,
```

